# **Chat138 对话系统 API 文档**

**基础路径：** `/api/chat`

---

## **1. 创建新对话**

* **URL**: `POST /api/chat`
* **描述**: 创建一个新的对话，会返回 uuid 和 AI 第一轮回复
* **权限**: 需要登录（用户身份认证）

### 请求参数

| 参数名     | 类型     | 是否必需 | 描述       |
| ------- | ------ | ---- | -------- |
| message | String | 是    | 用户输入第一句话 |

### 示例请求

```json
{
  "message": "你好，请介绍一下你自己~"
}
```

### 响应示例

```json
{
  "uuid": "550e8400-e29b-41d4-a716-446655440000",
  "messages": [
    { "role": "user", "content": "你好，请介绍一下你自己~" },
    { "role": "assistant", "content": "你好呀~ 我是你的AI助手~" }
  ]
}
```

---

## **2. 获取对话记录**

* **URL**: `GET /api/chat/{uuid}`
* **描述**: 获取指定对话的全部消息
* **权限**: 需要登录

### 路径参数

| 参数名  | 类型     | 描述          |
| ---- | ------ | ----------- |
| uuid | String | 对话唯一标识 UUID |

### 响应示例

```json
{
  "uuid": "550e8400-e29b-41d4-a716-446655440000",
  "summary": "你好，请介绍一下你自己~",
  "messages": [
    { "role": "user", "content": "你好~" },
    { "role": "assistant", "content": "你好呀~ 有什么需要帮助的吗？" }
  ]
}
```

---

## **3. 获取对话列表**

* **URL**: `GET /api/chat`
* **描述**: 获取当前用户的所有对话列表（分页）
* **权限**: 需要登录

### 查询参数

| 参数名  | 类型  | 是否必需 | 描述         |
| ---- | --- | ---- | ---------- |
| page | int | 否    | 页码，默认 1    |
| size | int | 否    | 每页数量，默认 10 |

### 响应示例

```json
{
  "page": 1,
  "size": 10,
  "total": 25,
  "data": [
    {
      "uuid": "550e8400-e29b-41d4-a716-446655440000",
      "summary": "介绍AI助手",
      "createTime": "2024-06-19T12:00:00",
      "updateTime": "2024-06-19T12:30:00"
    },
    {
      "uuid": "a5f2e900-1122-33aa-bbcc-445566778899",
      "summary": "聊聊Spring AI",
      "createTime": "2024-06-18T14:00:00",
      "updateTime": "2024-06-18T14:30:00"
    }
  ]
}
```

---

## **4. 继续对话**

* **URL**: `POST /api/chat/{uuid}`
* **描述**: 在已有对话下追加一条用户输入，获取对应 AI 回复
* **权限**: 需要登录

### 请求参数

| 参数名     | 类型     | 是否必需 | 描述   |
| ------- | ------ | ---- | ---- |
| message | String | 是    | 用户输入 |

### 示例请求

```json
{
  "message": "Spring AI 支持哪些模型？"
}
```

### 响应示例

```json
{
  "messages": [
    { "role": "user", "content": "Spring AI 支持哪些模型？" },
    { "role": "assistant", "content": "Spring AI 支持 OpenAI、Hugging Face、Azure OpenAI 等~" }
  ]
}
```

---

## **5. 删除对话**

* **URL**: `DELETE /api/chat/{uuid}`
* **描述**: 删除整个对话记录
* **权限**: 需要登录

### 响应示例

```json
{
  "success": true,
  "message": "对话已删除"
}
```

---

## **状态码规范**

| 状态码 | 描述              |
| --- | --------------- |
| 200 | 成功              |
| 400 | 参数错误            |
| 401 | 未登录 / 无权限       |
| 404 | 找不到资源（UUID 不存在） |
| 500 | 服务器内部错误         |
